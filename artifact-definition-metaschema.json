{
  "allOf": [
    {
      "required": [
        "$md"
      ],
      "properties": {
        "$md": {
          "type": "object",
          "required": [
            "name",
            "access"
          ],
          "properties": {
            "defaultTargetConnectionGroup": {
              "description": "Enables the artifact type as defaultable for a Massdriver target connection group.",
              "type": "string",
              "oneOf": [
                {
                  "const": "credentials",
                  "title": "Credentials"
                },
                {
                  "const": "networking",
                  "title": "Networking"
                }
              ]
            },
            "dependentRequired": {
              "defaultTargetConnectionGroup": [
                "defaultTargetConnectionGroupLabel"
              ]
            },
            "defaultTargetConnectionGroupLabel": {
              "description": "Label to show in connection group for this artifact type.",
              "type": "string"
            },
            "access": {
              "description": "Controls whether the definition will be publicly accessible or private to your organization.",
              "type": "string",
              "default": "private",
              "oneOf": [
                {
                  "const": "private",
                  "title": "Private"
                },
                {
                  "const": "public",
                  "title": "Public"
                }
              ]
            },
            "name": {
              "description": "The type name of the artifact definition. This should be unique to your organization and will be prefixed with your organizations slug",
              "type": "string",
              "pattern": "^[a-z0-9-]{3,100}$"
            }
          }
        }
      },
      "_comment": "TODO: validate infra & security blocks & specs (any) - btw, should we take the scope out of specs or leave it for helping with complex search... maybe not requre it to be a cloud-based key. any?"
    },
    {
      "$ref": "http://json-schema.org/draft-07/schema#"
    }
  ]
}
